/**
 * generator-cg-gas - Yeoman Generator for Enterprise Angular projects, with Gulp Angular Sass
 * @version v3.3.3
 * @link https://github.com/Lunatic83/generator-cg-gas
 * @license 
 */
angular.module("larionovTest",["ui.bootstrap","ui.bootstrap.modal","ui.utils","ui.router","ngAnimate","angularCharts","templates"]),angular.module("larionovTest").config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$locationProvider.html5Mode({enabled:!0,requireBase:!1}),$urlRouterProvider.otherwise("/home")}]),angular.module("larionovTest").run(["$rootScope","$state","$stateParams",function($rootScope,$state,$stateParams){$rootScope.$state=$state,$rootScope.$stateParams=$stateParams,$rootScope.safeApply=function(fn){var phase=$rootScope.$$phase;"$apply"===phase||"$digest"===phase?fn&&"function"==typeof fn&&fn():this.$apply(fn)}}]),angular.module("larionovTest").filter("capitalize",function(){return function(input){return input?input.replace(/([^\W_]+[^\s-]*) */g,function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1).toLowerCase()}):""}}),angular.module("larionovTest").factory("builderData",function(){var callback=null,data=[{id:1,name:"Tenrox-R1_1235",type:"build",owner:null,started:null,finished:null,state:"pending"},{id:2,name:"432462",type:"firewall",owner:"jtuck",started:"4/18/2014 12:12pm",state:"running",metrics:{total:60,test:{value:64,inc:!0},maintainability:{value:22,inc:!1},security:{value:99,inc:!0},worksmanship:{value:55,inc:!0}}},{id:3,name:"432461",type:"firewall",owner:"samy",started:"4/18/2014 10:53am",state:"rejected",metrics:{total:100,test:{value:64,inc:!0},maintainability:{value:22,inc:!1},security:{value:99,inc:!0},worksmanship:{value:55,inc:!0}},build:{total:100,debug:!0,release:!0,finished:"10:46am - 4/17/2014"},unittest:{total:100,pass:142,fail:10,coverage:76,success:!0},functest:{total:100,pass:4321,fail:2145,coverage:23,success:!1},result:{success:!1,message:"Change Rejected",description:"Metrics Reduction",failure_step:"metrics"}},{id:4,name:"Tenrox-R1_1234",type:"build",owner:null,started:"4/17/2014 9:42am",state:"complete",metrics:{total:100,test:{value:64,inc:!0},maintainability:{value:53,inc:!0},security:{value:64,inc:!0},worksmanship:{value:72,inc:!0}},build:{total:100,debug:!0,release:!0,finished:"10:46am - 4/17/2014"},unittest:{total:100,pass:142,fail:10,coverage:76,success:!0},functest:{total:100,pass:4321,fail:2145,coverage:23,success:!1},result:{success:!0,message:"Complete"}},{id:5,name:"432460",type:"firewall",owner:"samy",started:"4/17/2014 7:51am",state:"rejected",metrics:{total:100,test:{value:64,inc:!0},maintainability:{value:22,inc:!1},security:{value:99,inc:!0},worksmanship:{value:55,inc:!0}},result:{success:!1,message:"Change Rejected",description:"Metrics Reduction",failure_step:"metrics"}},{id:6,name:"432459",type:"firewall",owner:"samy",started:"4/17/2014 9:42am",state:"accepted",metrics:{total:100,test:{value:64,inc:!0},maintainability:{value:53,inc:!0},security:{value:64,inc:!0},worksmanship:{value:72,inc:!0}},build:{total:100,debug:!0,release:!0,finished:"10:46am - 4/17/2014"},unittest:{total:100,pass:142,fail:10,coverage:76,success:!0},functest:{total:100,pass:4321,fail:2145,coverage:23,success:!1},result:{success:!0,message:"Change Accepted",description:"Auto Merged"}}],builderData={getData:function(){return data},setData:function(d){data=d,callback&&callback("update",data)},on:function(event,cb){callback=cb}};return builderData}),angular.module("larionovTest").controller("ModalInstanceCtrl",["$scope","$modalInstance",function(scope,$modalInstance){scope.ok=function(){$modalInstance.close()},scope.cancel=function(){$modalInstance.dismiss("cancel")}}]),angular.module("larionovTest").directive("builderView",["builderData","$modal",function(builderData,$modal){return{restrict:"E",replace:!0,scope:{},templateUrl:"modules/directive/builder-view/builder-view.html",link:function(scope,element){element.addClass("builder-view"),scope.showEditor=!1,scope.templateData={},builderData.on("update",function(event,data){if(scope.data=data,data)for(var i=0;i<scope.data.length;i++)scope.initRow(scope.data[i])}),scope.dataEditor=angular.toJson(builderData.getData(),!0),scope.status={openedId:null},scope.open=function(itemId){scope.status.openedId=scope.status.openedId===itemId?null:itemId},scope.openModal=function(title){scope.templateData.modalTitle=title;$modal.open({templateUrl:"myModalContent.html",controller:"ModalInstanceCtrl",size:"lg",scope:scope})},scope.updateData=function(){builderData.setData(angular.fromJson(scope.dataEditor))},scope.chartConfig={colors:["#ed7d31","#538135"],title:"",tooltips:!1,labels:!0,isAnimate:!0,waitForHeightAndWidth:!0,legend:{display:!1,position:"left"},innerRadius:0,lineLegend:"lineEnd"},scope.initRow=function(item){item._itemStatus=item.state,"firewall"===item.type&&("accepted"===item.state&&(item._itemStatus="success"),"rejected"===item.state&&(item._itemStatus="failure")),"build"===item.type&&("complete"===item.state&&(item._itemStatus="success"),"failed"===item.state&&(item._itemStatus="failure")),item.unittest&&(item._chartUnitPercent=parseInt(100*item.unittest.fail/(item.unittest.pass+item.unittest.fail)),item._chartUnitData={series:["Tests"],data:[{x:"Passed",y:[item.unittest.pass]},{x:"Failed",y:[item.unittest.fail]}]}),item.functest&&(item._chartFuncPercent=parseInt(100*item.functest.fail/(item.functest.pass+item.functest.fail)),item._chartFuncData={series:["Tests"],data:[{x:"Passed",y:[item.functest.pass]},{x:"Failed",y:[item.functest.fail]}]})},scope.updateData()}}}]),angular.module("larionovTest").constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig","$transition",function($scope,$attrs,progressConfig,$transition){var self=this,bars=[],max=angular.isDefined($attrs.max)?$scope.$parent.$eval($attrs.max):progressConfig.max,animate=angular.isDefined($attrs.animate)?$scope.$parent.$eval($attrs.animate):progressConfig.animate;this.addBar=function(bar,element){var oldValue=0,index=bar.$parent.$index;angular.isDefined(index)&&bars[index]&&(oldValue=bars[index].value),bars.push(bar),this.update(element,bar.value,oldValue),bar.$watch("value",function(value,oldValue){value!==oldValue&&self.update(element,value,oldValue)}),bar.$on("$destroy",function(){self.removeBar(bar)})},this.update=function(element,newValue,oldValue){var percent=this.getPercentage(newValue);animate?(element.css("width",this.getPercentage(oldValue)+"%"),$transition(element,{width:percent+"%"})):element.css({transition:"none",width:percent+"%"})},this.removeBar=function(bar){bars.splice(bars.indexOf(bar),1)},this.getPercentage=function(value){return Math.round(100*value/max)}}]).directive("buildProgressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"modules/directive/build-progress/build-progress.html",link:function(scope,element,attrs,progressCtrl){progressCtrl.addBar(scope,angular.element(element.children()[0]))}}}),angular.module("larionovTest").directive("buildArrow",function(){return{restrict:"E",scope:{value:"="},link:function(scope,element,attrs){element.addClass("arrow"),scope.$watch("value",function(){var value=scope.value;element.html(""),element.removeClass("up down left right green red yellow"),value&&(element.addClass("vert"===attrs.arrowType?value.inc?"up green":"down red":value.inc?"right yellow":"left yellow"),element.append(element.hasClass("up")||element.hasClass("left")?'<div class="tri"></div><div class="bar"></div>':'<div class="bar"></div><div class="tri"></div>'),element.append('<div class="text"><span>'+value.value+"</span></div>"))})}}});